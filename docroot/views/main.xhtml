<f:view
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
>



	<h:form id="viewmypubs" >  
		<h:outputText value="Select a publication below to edit a submission. You may need to refresh to see recently uploaded entries."/> <br/>
		<h:outputText value="#{viewPublications.pubselecterr}" style="color:red"></h:outputText>
		<p:growl id="msg2" life="10000" showDetail="true" sticky="true"/>  
	 		
	 		<p:dataTable id="vmp" var="sfiles" rowKey="#{sfiles.index}" value="#{viewPublications.publications}" type="ordered" selection="#{viewPublications.selectedpub}" selectionMode="single" paginator="true" rows="10" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,15" >
	
	                 <p:column headerText="Publication" > 
					 #{sfiles.title} <br/>
					 #{sfiles.first5authors} <br/>
					 #{sfiles.pmid}<br/>
					  </p:column>
					  
					  <p:column headerText="Completed?"> 
	
					  #{sfiles.comp}
					  </p:column>
					  
	
			</p:dataTable >
			<br/>
			<p:commandButton value="Edit/Complete this Publication" action="#{viewPublications.moveStep(2)}" update="@form" onclick="setTimeout('document.getElementById(\'' + this.id + '\').disabled=true;', 50);" oncomplete="setTimeout('document.getElementById(\'' + this.id + '\').disabled=false;', 50);"/>
			<p:commandButton value="Refresh" actionListener="#{viewPublications.handleRefresh1}" update="msg2,:viewmypubs:vmp" onclick="setTimeout('document.getElementById(\'' + this.id + '\').disabled=true;', 50);" oncomplete="setTimeout('document.getElementById(\'' + this.id + '\').disabled=false;', 50);"/>
	
	
	</h:form> 
	


</f:view>